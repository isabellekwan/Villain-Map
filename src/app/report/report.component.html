<body>
    <a class = 'btn btn-primary' routerLink="/home">Back</a>
    <div class = "body">
    <form
        [formGroup]="form"
        (ngSubmit)="onSubmit(form.value)"
    >
        <fieldset
            class="d-grid gap-2 col-12"
        >
            <legend>Report a Nuisance!</legend>
            <label for="name">Reporter's Name:</label>
            <input 
                type="text"
                name="name"
                placeholder="Enter your name"
                formControlName="reportname"
            >
            <div *ngIf="form.get('reportname')?.invalid && form.get('reportname')?.touched">
                <div *ngIf="form.get('reportname')?.errors?.['required']">
                  <span class="alert">Reporter's Name is required</span>
                </div>
              </div>
            <label for="phone">Reporter's Phone Number:</label>
            <input 
                type="tel"
                name="phone"
                id="phone"
                placeholder="Eg. 111-222-3333"
                pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" 
                formControlName="reportnumber"
            >
            <div *ngIf="form.get('reportnumber')?.invalid && form.get('reportnumber')?.touched">
                <div *ngIf="form.get('reportnumber')?.errors?.['pattern']">
                  <span class="alert">Please enter a valid phone number (Eg. 111-222-3333)</span>
                </div>
              </div>
            
            <label for="name">Villain's Name:</label>
            <input 
                type="text"
                name="name"
                placeholder="Enter the villain's name"
                formControlName="name"
            >
            <div *ngIf="form.get('name')?.invalid && form.get('name')?.touched">
                <div *ngIf="form.get('name')?.errors?.['required']">
                  <span class="alert">Villain's Name is required</span>
                </div>
              </div>
            <label for="imageUrl">Image URL (Optional):</label>
            <input 
            type="text"
            name="imageUrl"
            id="imageUrl"
            placeholder="Enter image URL (optional)"
            formControlName="imageUrl"
            >
            <label for="locationSelect">Select or Add Location:</label>
            <select 
            name="location"
            id="locationSelect"
            formControlName="location"
            (change)="onLocationSelected($event)"
            >
            <option value="" disabled selected>Select a location or add a new one</option>
            
            <option *ngFor="let location of previousLocations" [value]="location.name">
                {{ location.name }}
            </option>
            
            <option value="new">Add New Location</option>
            </select>

            <label for="extraDetails">Extra Details:</label>
            <textarea 
            name="extraDetails"
            id="extraDetails"
            rows="4"
            placeholder="Enter extra details"
            formControlName="extraDetails"
            ></textarea>
            <div *ngIf="form.get('extraDetails')?.invalid && form.get('extraDetails')?.touched">
                <div *ngIf="form.get('extraDetails')?.errors?.['required']">
                  <span class="alert">Extra Details are required</span>
                </div>
              </div>
            <button 
                class="btn btn-outline-primary"
                [disabled]="!form.valid"
            >
                SAVE
            </button>
        </fieldset>
        <br><br>
    </form>
</div>
</body>